<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>break up with your girlfriend, i&#39;m bored | ariana&#39;s blog</title>
<meta name="keywords" content="">
<meta name="description" content="about stable matching">
<meta name="author" content="">
<link rel="canonical" href="//localhost:1313/posts/break_up_with_your_girlfriend/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css" integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as="style">
<link rel="icon" href="//localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="//localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="//localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="//localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="//localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="//localhost:1313/posts/break_up_with_your_girlfriend/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" integrity="sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>




<meta property="og:url" content="//localhost:1313/posts/break_up_with_your_girlfriend/">
  <meta property="og:site_name" content="ariana&#39;s blog">
  <meta property="og:title" content="break up with your girlfriend, i&#39;m bored">
  <meta property="og:description" content="about stable matching">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-09-21T19:58:01+08:00">
    <meta property="article:modified_time" content="2023-09-21T19:58:01+08:00">
    <meta property="og:image" content="//localhost:1313/high_school_admission/bkwyg.jpeg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="//localhost:1313/high_school_admission/bkwyg.jpeg">
<meta name="twitter:title" content="break up with your girlfriend, i&#39;m bored">
<meta name="twitter:description" content="about stable matching">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "//localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "break up with your girlfriend, i'm bored",
      "item": "//localhost:1313/posts/break_up_with_your_girlfriend/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "break up with your girlfriend, i'm bored",
  "name": "break up with your girlfriend, i\u0027m bored",
  "description": "about stable matching",
  "keywords": [
    
  ],
  "articleBody": "So, I made this epic promise to Al Roth while asking him to sign his book “Two-Sided Matching (1990)”, that I’ll dive in and finish reading it in a blistering four months (spanning this semester). Fast forward, and a quarter of that time has slipped through my fingers, leaving me stranded on page 40 out of 260. Well…careful with your promises.\nTime to step on the gas pedal. But hey, I found some inspiration in Chapter 2, section 2.3, courtesy of the lattice theorem. It relates to a song of Ariana Grande (the title). Not trying to sabotage anybody’s relationship though. Here’s the math:\nBackground check: stable matching. Consider a prom, with boys and girls labelled as $M:={m_1, m_2, …, m_{k_m}}$ and $W:={w_1, w_2, …, w_{k_w}}$. Naturally, for any $m\\in M$ [$w\\in W$] he [she] would have a preference over any two girls [boys] $w, w’\\in W$ [$m, m’\\in M$]. Denote this pairwise preference order as $w\\succeq_m w’$ [$m\\succeq_w m’$]. Assume that it’s acyclic and strict (yeah i know this is nontrivial in certain sense, bite me). And we’re allowing everyone to rank themselves above a few others. So, for instance, a boy $m\\in M$, might have a preference list that looks something like this:\n$$ P(m):w_1 \\succ w_3 \\succ m \\succ w_2 $$ indicating that $m$ adores $w_1$, maybe she’s his crush. $w_3$ isn’t too bad, but she’s got a bit of an attitude, so she’s his second choice. Finally, $w_2$? Too nerdy. He’d rather attend prom solo than with her.\nNow, this prom drama (or generally, a bilateral matching market $(M, W, P)$) needs a “match”. A matching $\\mu$ is a mapping from $M\\cup W$ to $M\\cup W$. For it to be proper, it needs to satisfy two criteria: (i) boys are matched to girls (and vice versa), i.e., $\\mu(m)\\in W\\cup{m}$ and (ii) it’s a one-to-one matching, i.e., $\\mu(m) = w$ iff. $\\mu(w) = m$.\nBut then, a meddling teacher enters the scene, acting as a matchmaker, trying to pair everyone up instead of letting the market handle its own romantic affairs. Now, this teacher has to find a stable matching—a matching where there is no blocking pair $(m, w)$ that is not matched but both prefer each other than their current matches.\nBtw, Ariana Grande is an expert in this, as she sings in one of her hit single break up with your girlfriend, i’m bored:\nThen I realize she’s right there, and I’m at home like, “Damn, this ain’t fair”.\nAnd you realize she’s right there, and you’re at home like “Damn, she can’t compare.”\nChill. In a bilateral matching market, it’s been proven that a stable matching always exists. Denote the set of all possible stable matchings as $\\mathcal S$, $\\mathcal S\\ne \\empty$.\nNow, the fun part comes in. There can be multiple possible stable matchings. But which one’s better? We can define a partial order on the space $\\mathcal S$, based on all the girls’ preferences. Given two stable matches, $\\mu_1$ and $\\mu_2$, we say $\\mu_1 \\succ_W \\mu_2$ if all the girls like $\\mu_1$ as much as $\\mu_2$, with at least some of them stricly preferring $\\mu_1$ over $\\mu_2$. I.e. $\\mu_1\\succ_W \\mu_2 \\text{ if and only if:}$ $$ \\mu_1(w)\\succeq_w \\mu_2(w),\\forall w\\in W\\newline \\mu_1(w)\\succ_w \\mu_2(w),\\exists w\\in W $$ The same partial order can be set up w.r.t. boys. But say, the teacher is a bit biased and favors the girls. She has two stable matches, $\\mu_1$ and $\\mu_2$ in her hands. Now, if $\\mu_1\\succ_W \\mu_2$, she can just choose $\\mu_1$ over $\\mu_2$. But what if $\\mu_1$ is incomparable to $\\mu_2$ w.r.t. girls, i.e. some girls prefer $\\mu_1$ while others prefer $\\mu_2$? In this case, we merge the two stable matching $\\mu_1, \\mu_2$ that we have in favours of the girls.\nFormally, define $\\lambda := \\mu_1 \\vee_W \\mu_2$ where $$ \\lambda (w) = \\mu_1(w)\\text{, if } \\mu_1(w)\\succeq_w\\mu_2(w)\\text{ and vice versa}\\newline \\lambda (m) = \\mu_1(m)\\text{, if } \\mu_1(m)\\preceq_m\\mu_2(m)\\text{ and vice versa} $$ Notice that the operation $\\vee_W$ leans towards the girls. Moreover, it can be proved that $\\lambda$ is also a stable matching. And all the girls are happier with $\\lambda$, i.e. $\\lambda\\succ_W \\mu_1$ and $\\lambda\\succ_W \\mu_2$.\nSo here’s the solution, the teacher starts with some stable matching $\\mu\\in \\mathcal S$ at hand and start looking for other stable matchings $\\mu’\\in \\mathcal S$ and update $\\mu = \\mu’ \\vee_W\\mu$. Since $\\mathcal S$ is finite, she will eventually land at a $W$-optimal matching $\\mu^*$ which is best for all girls while worst for all boys. It’s worth noting that the saying “worst for all boys” is a nontrivial statement, but can be proven starting from the observation that $\\lambda $ is worse for all boys than $\\mu_1$ or $\\mu_2$.\nHow I wish I’d learned this theory in high school!\n",
  "wordCount" : "791",
  "inLanguage": "en",
  "image":"//localhost:1313/high_school_admission/bkwyg.jpeg","datePublished": "2023-09-21T19:58:01+08:00",
  "dateModified": "2023-09-21T19:58:01+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "//localhost:1313/posts/break_up_with_your_girlfriend/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "ariana's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "//localhost:1313/favicon.ico"
    }
  }
}
</script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Product+Sans:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="//localhost:1313/css/custom.b017fc6c61ff4eacd2943e3c9726e1a935c706d1ea1a1b7c17773e63b47342d3.css">
    
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-16651897053">
</script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-16651897053');
</script>

<script>
  gtag('event', 'conversion', {
      'send_to': 'AW-16651897053/wjItCK3FisUZEN2Rn4Q-',
      'value': 1.0,
      'currency': 'USD'
  });
</script>


<script async src="https://www.googletagmanager.com/gtag/js?id=AW-16651897053"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-16651897053');
</script>

</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="//localhost:1313/" accesskey="h" title="ariana&#39;s blog (Alt + H)">ariana&#39;s blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="//localhost:1313/search" title="search (Alt &#43; /)" accesskey=/>
                    <span>search</span>
                </a>
            </li>
            <li>
                <a href="//localhost:1313/archives" title="archive">
                    <span>archive</span>
                </a>
            </li>
            <li>
                <a href="//localhost:1313/posts/tags" title="tags">
                    <span>tags</span>
                </a>
            </li>
            <li>
                <a href="//localhost:1313/posts/pinned" title="about me">
                    <span>about me</span>
                </a>
            </li>
            <li>
                <a href="//localhost:1313/procrastination_bulletin" title="pending ideas">
                    <span>pending ideas</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      break up with your girlfriend, i&#39;m bored
    </h1>
    <div class="post-meta"><span title='2023-09-21 19:58:01 +0800 CST'>September 21, 2023</span>

</div>
  </header>
  <div class="post-content"><p>So, I made this epic promise to Al Roth while asking him to sign his book &ldquo;<em>Two-Sided Matching (1990)</em>&rdquo;, that I&rsquo;ll dive in and finish reading it in a blistering <strong>four months</strong> (spanning this semester). Fast forward, and a quarter of that time has slipped through my fingers, leaving me stranded on page 40 out of 260. Well&hellip;careful with your promises.</p>
<p>Time to step on the gas pedal. But hey, I found some inspiration in Chapter 2, section 2.3, courtesy of the lattice theorem. It relates to a song of Ariana Grande (the title). Not trying to sabotage anybody&rsquo;s relationship though. Here&rsquo;s the math:</p>
<p>Background check: stable matching. Consider a prom, with boys and girls labelled as $M:={m_1, m_2, &hellip;, m_{k_m}}$ and $W:={w_1, w_2, &hellip;, w_{k_w}}$. Naturally, for any $m\in M$ [$w\in W$] he [she] would have a preference over any two girls [boys] $w, w&rsquo;\in W$ [$m, m&rsquo;\in M$]. Denote this pairwise preference order as $w\succeq_m w&rsquo;$ [$m\succeq_w m&rsquo;$]. Assume that it&rsquo;s acyclic and strict (yeah i know this is nontrivial in certain sense, bite me). And we&rsquo;re allowing everyone to rank themselves above a few others. So, for instance, a boy $m\in M$, might have a preference list that looks something like this:</p>
<p>$$
P(m):w_1 \succ w_3 \succ m \succ w_2
$$
indicating that $m$ adores $w_1$, maybe she&rsquo;s his crush. $w_3$ isn&rsquo;t too bad, but she&rsquo;s got a bit of an attitude, so she&rsquo;s his second choice. Finally, $w_2$? Too nerdy. He&rsquo;d rather attend prom solo than with her.</p>
<p>Now, this prom drama (or generally, a bilateral matching market $(M, W, P)$) needs a &ldquo;match&rdquo;. A matching $\mu$ is a mapping from $M\cup W$ to $M\cup W$. For it to be proper, it needs to satisfy two criteria: (i) boys are matched to girls (and vice versa), i.e., $\mu(m)\in W\cup{m}$ and (ii) it&rsquo;s a one-to-one matching, i.e., $\mu(m) = w$ <em>iff.</em> $\mu(w) = m$.</p>
<p>But then, a meddling teacher enters the scene, acting as a matchmaker, trying to pair everyone up instead of letting the market handle its own romantic affairs. Now, this teacher has to find a <strong>stable matching</strong>—a matching where there is no blocking pair $(m, w)$ that is not matched but both prefer each other than their current matches.</p>
<p>Btw, Ariana Grande is an expert in this, as she sings in one of her hit single <em>break up with your girlfriend, i&rsquo;m bored</em>:</p>
<blockquote>
<p>Then I realize she&rsquo;s right there, and I&rsquo;m at home like, &ldquo;Damn, this ain&rsquo;t fair&rdquo;.</p>
<p>And you realize she&rsquo;s right there, and you&rsquo;re at home like &ldquo;Damn, she can&rsquo;t compare.&rdquo;</p>
</blockquote>
<p><img alt="bkwyg1" loading="lazy" src="/high_school_admission/bkwyg1.jpeg"></p>
<p>Chill. In a bilateral matching market, it&rsquo;s been proven that a stable matching always exists. Denote the set of all possible stable matchings as $\mathcal S$, $\mathcal S\ne \empty$.</p>
<p>Now, the fun part comes in. There can be multiple possible stable matchings. But which one&rsquo;s better? We can define a partial order on the space $\mathcal S$, based on all the girls&rsquo; preferences. Given two stable matches, $\mu_1$ and $\mu_2$, we say $\mu_1 \succ_W \mu_2$ if all the girls like $\mu_1$ as much as $\mu_2$, with at least some of them stricly preferring $\mu_1$ over $\mu_2$. I.e. $\mu_1\succ_W \mu_2 \text{ if and only if:}$
$$
\mu_1(w)\succeq_w \mu_2(w),\forall w\in W\newline
\mu_1(w)\succ_w \mu_2(w),\exists w\in W
$$
The same partial order can be set up w.r.t. boys. But say, the teacher is a bit biased and favors the girls. She has two stable matches, $\mu_1$ and $\mu_2$ in her hands. Now, if $\mu_1\succ_W \mu_2$, she can just choose $\mu_1$ over $\mu_2$. But what if $\mu_1$ is incomparable to $\mu_2$ w.r.t. girls, i.e. some girls prefer $\mu_1$ while others prefer $\mu_2$? In this case, we merge the two stable matching $\mu_1, \mu_2$ that we have in favours of the girls.</p>
<p>Formally, define $\lambda := \mu_1 \vee_W \mu_2$ where
$$
\lambda (w) = \mu_1(w)\text{, if } \mu_1(w)\succeq_w\mu_2(w)\text{ and vice versa}\newline
\lambda (m) = \mu_1(m)\text{, if } \mu_1(m)\preceq_m\mu_2(m)\text{ and vice versa}
$$
Notice that the operation $\vee_W$ leans towards the girls. Moreover, it can be proved that $\lambda$ is also a stable matching. And all the girls are happier with $\lambda$, i.e. $\lambda\succ_W \mu_1$ and $\lambda\succ_W \mu_2$.</p>
<p>So here&rsquo;s the solution, the teacher starts with some stable matching $\mu\in \mathcal S$ at hand and start looking for other stable matchings $\mu&rsquo;\in \mathcal S$ and update $\mu = \mu&rsquo; \vee_W\mu$. Since $\mathcal S$ is finite, she will eventually land at a $W$-optimal matching $\mu^*$ which is best for all girls while worst for all boys. It&rsquo;s worth noting that the saying &ldquo;worst for all boys&rdquo; is a nontrivial statement, but can be proven starting from the observation that $\lambda $ is worse for all boys than $\mu_1$ or $\mu_2$.</p>
<p>How I wish I&rsquo;d learned this theory in high school!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="//localhost:1313/">ariana&#39;s blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script id="usercentrics-cmp" src="https://web.cmp.usercentrics.eu/ui/loader.js" data-settings-id="_KlbvhaKistzRA" async></script>

</body>

</html>
